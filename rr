local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")

local WEBHOOK_URL = "YOUR_WEBHOOK_URL_HERE"
local LocalPlayer = Players.LocalPlayer
local PlaceId = game.PlaceId
local TeleportData = {}
local Cursor = ""

-- batas maksimal pemain yang boleh dimasukin
local MAX_PLAYER = 15

-- fungsi buat kirim ke webhook
local function sendWebhook(message)
    local data = {
        ["content"] = message
    }
    local jsonData = HttpService:JSONEncode(data)

    request({
        Url = WEBHOOK_URL,
        Method = "POST",
        Headers = {["Content-Type"] = "application/json"},
        Body = jsonData
    })
end

-- cek meteor shower
local function checkMeteor()
    local boosts = LocalPlayer.PlayerGui:FindFirstChild("MainUI") and LocalPlayer.PlayerGui.MainUI:FindFirstChild("Boosts")
    if boosts and boosts:FindFirstChild("Meteor Shower") then
        local playerCount = #Players:GetPlayers()
        local serverLink = "roblox://placeId=" .. PlaceId .. "&gameInstanceId=" .. game.JobId

        local msg = string.format("Meteor Shower Found!\nPlayers: %d\nServer: %s", playerCount, serverLink)
        sendWebhook(msg)

        task.wait(20) -- tunggu 20 detik sebelum serverhop
        return true
    end
    return false
end

-- server hop
local function serverHop()
    local url = "https://games.roblox.com/v1/games/" .. PlaceId .. "/servers/Public?sortOrder=Asc&limit=100"
    if Cursor ~= "" then
        url = url .. "&cursor=" .. Cursor
    end

    local success, result = pcall(function()
        return HttpService:JSONDecode(game:HttpGet(url))
    end)

    if success and result and result.data then
        for _, server in ipairs(result.data) do
            -- cuma masuk server yg ga penuh dan <= MAX_PLAYER
            if server.playing < server.maxPlayers 
               and server.playing <= MAX_PLAYER 
               and not TeleportData[server.id] 
               and server.id ~= game.JobId then

                TeleportData[server.id] = true
                local ok, err = pcall(function()
                    TeleportService:TeleportToPlaceInstance(PlaceId, server.id, LocalPlayer)
                end)
                if not ok then
                    warn("Teleport gagal, coba server lain: ", err)
                end
                task.wait(2)
            end
        end
        if result.nextPageCursor then
            Cursor = result.nextPageCursor
            serverHop()
        end
    else
        warn("Gagal ambil data server.")
    end
end

-- jalankan
task.delay(60, function() -- tunggu 1 menit setelah join sebelum mulai
    while true do
        local found = checkMeteor()
        if not found then
            task.wait(30) -- tunggu 30 detik kalo ga nemu
            serverHop()
        end
    end
end)
