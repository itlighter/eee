local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")

local placeId = game.PlaceId
local player = Players.LocalPlayer

-- Fungsi ambil daftar server
local function GetServers(cursor)
    local url = "https://games.roblox.com/v1/games/"..placeId.."/servers/Public?sortOrder=Asc&limit=100"
    if cursor then
        url = url.."&cursor="..cursor
    end
    local response = game:HttpGet(url)
    return HttpService:JSONDecode(response)
end

-- Cari server yang masih ada slot dan tidak kosong
local function FindServer()
    local cursor = nil
    while true do
        local servers = GetServers(cursor)
        for _, s in ipairs(servers.data) do
            if s.playing > 0 and s.playing < s.maxPlayers then
                return s.id
            end
        end
        if servers.nextPageCursor then
            cursor = servers.nextPageCursor
        else
            break
        end
    end
    return nil
end

-- Teleport ke server yang ditemukan
local serverId = FindServer()
if serverId then
    TeleportService:TeleportToPlaceInstance(placeId, serverId, player)
else
    warn("Tidak ada server dengan slot tersedia.")
end
